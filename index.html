<!DOCTYPE html>
<html>
<head>
  <title>Salvation</title>
  <style>
    body {
      background: black;
      color: white;
      font-family: sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      overflow: hidden;
    }
    #gate {
      text-align: center;
    }
    #dial-area {
      margin: 30px auto;
      position: relative;
      width: 180px;
      height: 180px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #dial {
      width: 180px;
      height: 180px;
      border-radius: 50%;
      border: 8px solid #888;
      background: #222;
      position: relative;
      transition: transform 0.3s cubic-bezier(.4,2.2,.2,1);
      box-shadow: 0 0 20px #222;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1;
    }
    #pointer {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 12px solid transparent;
      border-right: 12px solid transparent;
      border-bottom: 24px solid #e74c3c;
      z-index: 2;
    }
    .numbers {
      position: absolute;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
    .num {
      position: absolute;
      left: 50%;
      top: 50%;
      transform-origin: 0 -70px;
      font-size: 20px;
      color: #ccc;
      font-weight: bold;
    }
    #controls {
      margin-top: 18px;
    }
    #controls button {
      background: #333;
      color: #fff;
      border: none;
      font-size: 24px;
      margin: 0 15px;
      border-radius: 50%;
      width: 44px;
      height: 44px;
      cursor: pointer;
      transition: background 0.2s;
    }
    #controls button:hover {
      background: #555;
    }
    #lockin {
      margin-top: 20px;
      padding: 10px 36px;
      font-size: 18px;
      background: #222;
      color: #fff;
      border: 2px solid #888;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s;
    }
    #lockin:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    #progress {
      margin: 18px 0 0 0;
      letter-spacing: 8px;
      font-size: 22px;
      color: #e3e3e3;
      min-height: 1em;
    }
    .flash {
      color: red;
      font-weight: bold;
      animation: flash 1s infinite;
    }
    @keyframes flash {
      0%, 50%, 100% { opacity: 1; }
      25%, 75% { opacity: 0; }
    }
    #content {
      display: none;
    }
    #slideshow {
      width: 320px;
      height: 240px;
      object-fit: cover;
      display: block;
      margin: 0 auto;
    }
    a.secret {
      position: absolute;
      top: 45%;  
      left: 50%;
      width: 120px;
      height: 120px;
      transform: translate(-50%, -50%);
      text-indent: -9999px;
      overflow: hidden;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <!-- Code Gate -->
  <div id="gate">
    <h1>Unlock the Safe</h1>
    <div id="dial-area">
      <div id="pointer"></div>
      <div id="dial">
        <div class="numbers" id="numbers"></div>
      </div>
    </div>
    <div id="controls">
      <button id="left">&#8634;</button>
      <span style="display:inline-block;width:36px;"></span>
      <button id="right">&#8635;</button>
    </div>
    <button id="lockin">Lock In</button>
    <div id="progress"></div>
    <p id="message"></p>
  </div>

  <!-- Hidden content -->
  <div id="content">
    <img id="slideshow" src="gif1.gif" alt="Salvation">
    <a class="secret" href="https://www.youtube.com/watch?v=mDF_ME3ihKM">hidden link</a>
  </div>

  <script>
    // --- Safe Dial Logic ---
    const CORRECT_CODE = ["2", "4", "1", "3"];
    let codeInput = [];
    let digitIndex = 0;
    let currentNum = 1; // dial starts at 1
    let dialAngle = 0;

    // Draw dial numbers
    const numbersEl = document.getElementById("numbers");
    for(let i=1; i<=10; i++) {
      let deg = (i-1)*36; // 360/10=36 deg apart
      let el = document.createElement("span");
      el.className = "num";
      el.innerText = i;
      el.style.transform = `rotate(${deg}deg) translate(-50%, -78px) rotate(${-deg}deg)`;
      numbersEl.appendChild(el);
    }

    function updateDial() {
      // Rotate dial to show currentNum at the pointer (top)
      dialAngle = -((currentNum-1)*36);
      document.getElementById("dial").style.transform = `rotate(${dialAngle}deg)`;
    }

    function updateProgress() {
      let prog = codeInput.map(x=>"\u25CF").join(" ");
      let empty = Array(CORRECT_CODE.length-codeInput.length).fill("\u25CB").join(" ");
      document.getElementById("progress").textContent = prog + (prog && empty ? " " : "") + empty;
    }

    // Button handlers
    document.getElementById("left").onclick = () => {
      currentNum = currentNum === 1 ? 10 : currentNum - 1;
      updateDial();
    };
    document.getElementById("right").onclick = () => {
      currentNum = currentNum === 10 ? 1 : currentNum + 1;
      updateDial();
    };

    document.getElementById("lockin").onclick = () => {
      codeInput.push(String(currentNum));
      updateProgress();
      if (codeInput.length === CORRECT_CODE.length) {
        checkCode();
      }
    };

    function resetSafe(error=false) {
      codeInput = [];
      digitIndex = 0;
      currentNum = 1;
      updateDial();
      updateProgress();
      if(error){
        let message = document.getElementById("message");
        message.textContent = "False, False, False, turn back";
        message.classList.add("flash");
        setTimeout(()=>{
          message.textContent = "";
          message.classList.remove("flash");
        }, 2000);
      }
    }

    function checkCode() {
      if (JSON.stringify(codeInput) === JSON.stringify(CORRECT_CODE)) {
        document.getElementById("gate").style.display = "none";
        document.getElementById("content").style.display = "block";
      } else {
        resetSafe(true);
      }
    }

    // Keyboard controls for accessibility
    document.addEventListener("keydown", e => {
      if(document.getElementById("gate").style.display !== "none"){
        if(e.key === "ArrowLeft") document.getElementById("left").click();
        if(e.key === "ArrowRight") document.getElementById("right").click();
        if(e.key === "Enter") document.getElementById("lockin").click();
      }
    });

    // Initialize
    updateDial();
    updateProgress();

    // --- Slideshow logic ---
    const gifs = [
      "images (36).jpeg" 
      "b48cf55663ae7c4c95715bc31eb6c3f4.gif",
      "d53405ec19c25a96bcb2b68d34e9ce3b.gif",
      "f6e744008bf4b13876dc0269c016cce2.gif",
      "giphy (1).gif",
      "giphy (2).gif"
    ];
    let index = 0;
    const slideshow = document.getElementById("slideshow");

    setInterval(() => {
      if (document.getElementById("content").style.display === "block") {
        index = (index + 1) % gifs.length;
        slideshow.src = gifs[index];
      }
    }, 5000);
  </script>
</body>
</html>
